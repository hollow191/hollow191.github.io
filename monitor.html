<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>传感器监控界面</title>
    <style>
        /* 保留原界面的基础样式，避免结构混乱 */
        body { font-family: Arial; margin: 20px; }
        .status-online { color: #4CAF50; font-weight: bold; }
        .status-offline { color: #F44336; font-weight: bold; }
    </style>
</head>
<body>
    <!-- 保留原界面的内容结构 -->
    <div>User UUID: <span id="user-uuid">1CDBD4-C557-C81BB1</span></div>
    <div>Device: <span id="device">ESP32C3-82989</span></div>
    <div>Temperature: <span id="temperature">28.88°C (阈值30.00°C)</span></div>
    <div>Humidity: <span id="humidity">26.09% (阈值70.00%)</span></div>
    <div>WiFi Signal: <span id="wifi-signal">-32 dBm</span></div>
    <div>Status: <span id="status" class="status-offline">offline</span></div>
    <div>Last Update: <span id="last-update">2026/1/13 14:43:52</span></div>

    <script>
        // 1. 基于Last Update判断在线状态（1分钟内=online）
        function updateOnlineStatus() {
            const lastUpdateStr = document.getElementById("last-update").textContent;
            const lastUpdate = new Date(lastUpdateStr.replace(/\//g, '-'));
            const now = new Date();
            const timeDiff = now - lastUpdate; // 时间差（毫秒）
            
            const statusEl = document.getElementById("status");
            if (timeDiff <= 60 * 1000) { // 1分钟内
                statusEl.textContent = "online";
                statusEl.className = "status-online";
            } else {
                statusEl.textContent = "offline";
                statusEl.className = "status-offline";
            }
        }

        // 2. 初始化执行+定时刷新
        updateOnlineStatus();
        setInterval(updateOnlineStatus, 10 * 1000); // 每10秒刷新状态
    </script>
</body>
</html>
